<!DOCTYPE html>
<html lang="pl">
<head>
	<title>Zadanie6 JavaScript - CallBack</title>
	<meta charset="utf-8">
</head>
<body>
	<div id="box"></div>
	<script type="text/javascript">
		//system rejestracji użytkownika
		//1. Wysyłanie danych uzytkownika na serwer....
		//2. Walidacja danych...
		//3. Rejestracja uzytkownika...
		//4. Wysyła maila z potwierdzeniem...
		//!!!! Kolejność jest ważna
		const sentUserData = () => {
			return new Promise((rozwiazanie,error)=>{
				setTimeout(()=>{
					document.getElementById('box').innerHTML += "1. Wysyłanie danych uzytkownika na serwer....<br>";
					rozwiazanie();
				},3000)
			})
		}

		const validateData = () => {
			return new Promise((rozwiazanie,error)=>{	
				setTimeout(()=>{
					document.getElementById('box').innerHTML += "2. Walidacja danych...<br>";
					rozwiazanie();
				},2500)
			})
		}

		const registerUser = () => {
			return new Promise((rozwiazanie,error)=>{
				setTimeout(()=>{
					document.getElementById('box').innerHTML += "3. Rejestracja uzytkownika...<br>";
					rozwiazanie();
				},1500)
			})
		}

		const sendMail = () => {
			return new Promise((rozwiazanie,error)=>{
				setTimeout(()=>{
					document.getElementById('box').innerHTML += "4. Wysyła maila z potwierdzeniem...<br>";
					rozwiazanie("Email został wysłany");
				},1000)
			})
		}

		async function funkcjaAsynchroniczna(){

			await sentUserData();
			await validateData();
			await registerUser();
			await sendMail();


			console.log("Zakończono pracę");
		}

		funkcjaAsynchroniczna();

		console.log("Instrukcja pierwsza .....");
		console.log("Instrukcja druga .....");

	</script>
</body>
</html>